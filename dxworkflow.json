{
  "name": "dias_reports_v2.1.0",
  "title": "dias_reports_v2.1.0",
  "stages": [
    {
      "id": "stage-rpt_generate_bed_vep",
      "name": "generate_bed_for_vep",
      "executable": "app-generate_bed/1.2.0",
      "folder": "/workflow"
    },
    {
      "id": "stage-rpt_vep",
      "executable": "app-eggd_vep/1.1.0",
      "input": {
        "panel_bed": {
          "$dnanexus_link": {
            "outputField": "bed_file",
            "stage": "stage-rpt_generate_bed_vep"
          }
        }
      }
    },
    {
      "id": "stage-rpt_generate_workbook",
      "executable": "app-eggd_generate_variant_workbook/2.5.0",
      "folder": "/workflow",
      "input": {
        "exclude_columns": "BaseQRankSum ClippingRankSum DB ExcessHet FS MLEAC MLEAF MQ MQRankSum QD ReadPosRankSum SOR PL QUAL ID FILTER  CSQ_ClinVar_CLNSIGCONF  CSQ_Allele CSQ_HGNC_ID DP AC AF AN CSQ_SpliceAI_pred_DP_AL CSQ_SpliceAI_pred_DP_AG CSQ_SpliceAI_pred_DP_DG CSQ_SpliceAI_pred_DP_DL",
        "acmg": true,
        "rename_columns": "CSQ_Feature=Transcript DP_FMT=DP",
        "add_comment_column": true,
        "keep_tmp": true,
        "summary": "dias",
        "filter": "bcftools filter -e '(CSQ_Consequence==\"synonymous_variant\" | CSQ_Consequence==\"intron_variant\" | CSQ_Consequence==\"upstream_gene_variant\" | CSQ_Consequence==\"downstream_gene_variant\" | CSQ_Consequence==\"intergenic_variant\" | CSQ_Consequence==\"5_prime_UTR_variant\" | CSQ_Consequence==\"3_prime_UTR_variant\" | CSQ_gnomADe_AF>0.01 | CSQ_gnomADg_AF>0.01 | CSQ_TWE_AF>0.05) & CSQ_HGMD_CLASS!~ \"DM\" & CSQ_ClinVar_CLNSIG!~ \"pathogenic\\/i\" & CSQ_ClinVar_CLNSIGCONF!~ \"pathogenic\\/i\"'",
        "human_filter": "excluded gnomAD exomes / genomes > 1%, TWE > 5%, synonymous / intronic / intergenic / upstream / downstream / UTRs EXCEPT pathogenic status in ClinVar OR DM in HGMD Class",
        "reorder_columns": "CHROM POS REF ALT GT GQ DP_FMT AD CSQ_SYMBOL CSQ_EXON CSQ_INTRON CSQ_HGVSc CSQ_HGVSp CSQ_Consequence CSQ_IMPACT CSQ_VARIANT_CLASS CSQ_gnomADe_AF CSQ_gnomADe_Hom CSQ_gnomADe_AC CSQ_gnomADe_AN CSQ_gnomADg_AF CSQ_gnomADg_AC CSQ_gnomADg_AN CSQ_TWE_AF CSQ_TWE_AC_Hom CSQ_TWE_AC_Het CSQ_TWE_AN CSQ_HGMD CSQ_HGMD_CLASS CSQ_HGMD_RANKSCORE CSQ_HGMD_PHEN CSQ_Existing_variation CSQ_ClinVar CSQ_ClinVar_CLNDN CSQ_ClinVar_CLNSIG CSQ_Mastermind_MMID3 CSQ_CADD_PHRED CSQ_REVEL CSQ_SpliceAI_pred_DS_AG CSQ_SpliceAI_pred_DS_AL CSQ_SpliceAI_pred_DS_DG CSQ_SpliceAI_pred_DS_DL CSQ_HGVS_OFFSET CSQ_STRAND CSQ_Feature",
        "vcfs": [
          {
            "$dnanexus_link": {
              "outputField": "annotated_vcf",
              "stage": "stage-rpt_vep"
            }
          }
        ]
      }
    },
    {
      "id": "stage-rpt_generate_bed_athena",
      "name": "generate_bed_for_athena",
      "executable": "app-generate_bed/1.2.0"
    },
    {
      "id": "stage-rpt_athena",
      "executable": "app-eggd_athena/1.5.0",
      "input": {
        "limit": 260,
        "summary": true,
        "panel_bed": {
          "$dnanexus_link": {
            "outputField": "bed_file",
            "stage": "stage-rpt_generate_bed_athena"
          }
        }
      }
    }
  ]
}
